---
title: "Week 2 Report"
author: "Giles Carlos, Alyssandrei Parinas, Cadence Pinkerton, James Owens, Mia Chiu"
date: '2022-07-01'
output: html_document
---

# Libraries

```{r}
library(tidyverse)
library(R.matlab)
library(janitor)
library(readr)
```

# Loading in Data

```{r}
behavior_m <- readMat(here::here("data/superchris_BM.mat"))
ensemble_m <- readMat(here::here("data/superchris_EM_onlyspikes_c.mat"))
```

# Cleaning Data

### Pulling from List

```{r}
em <- data.frame(ensemble_m[1])
bm <- data.frame(behavior_m[1]) 
col_names <- data.frame(behavior_m[2])
```

### Renaming variables 

```{r}
  bm <-
    bm %>%
     rename(time_bin = behavMatrix.1,
         odor_1 = behavMatrix.2,
         odor_2 = behavMatrix.3,
         odor_3 = behavMatrix.4,
         odor_4 = behavMatrix.5,
         odor_5 = behavMatrix.6,
         position_1 = behavMatrix.7,
         position_2 = behavMatrix.8,
         position_3 = behavMatrix.9,
         position_4 = behavMatrix.10,
         position_5 = behavMatrix.11,
         in_seq_log = behavMatrix.12,
         performance_log = behavMatrix.13,
         poke_events = behavMatrix.14,
         front_reward = behavMatrix.15,
         back_reward = behavMatrix.16,
         x_val_pos = behavMatrix.17,
         y_val_pos = behavMatrix.18)
  
  bm <- clean_names(bm)

```

### changing variable types
```{r}
 range(bm$time_bin) # could use min or max function
  unique(bm$odor_1)  
  unique(bm$position_1) 
  unique(bm$in_seq_log) 
  unique(bm$performance_log) 
  unique(bm$poke_events) 
  unique(bm$front_reward) 
  unique(bm$back_reward) 
  
  bm <-
    bm %>%
    mutate(odor_1 = as.logical(odor_1),
           odor_2 = as.logical(odor_2),
           odor_3 = as.logical(odor_3),
           odor_4 = as.logical(odor_3),
           odor_5 = as.logical(odor_3),
           position_1 = as.logical(position_1),
           position_2 = as.logical(position_2),
           position_3 = as.logical(position_3),
           position_4 = as.logical(position_4),
           position_5 = as.logical(position_5),
           in_seq_log = as.factor(in_seq_log),
           performance_log = as.factor(performance_log),
           poke_events = as.factor(poke_events),
           front_reward = as.logical(front_reward),
           back_reward = as.logical(back_reward))
  glimpse(bm)
```

# Merging Ensemble Matrix and Behavior Matrix by Odor 

```{r}

```



# Exploratory Data Analysis

```{r}
bm %>% 
  select(time_bin, odor_1, poke_events) %>% 
  ggplot(aes(x = time_bin, y = poke_events)) + 
  geom_line() +
  geom_line(aes(x = time_bin, y = odor_1), colour = "Red")
```

### Poke Events

### Cells Firing in Odor vs Outside Odor

### Neurons Firing in Certain Positions 

### Odor A

### Odor B

### Odor C

### Odor D

### Odor E